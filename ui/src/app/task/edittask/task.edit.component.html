<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-sm-10">
        <h2>Users List</h2>
        <ol class="breadcrumb">
            <li>
                <a href="#">Home</a>
            </li>
            <li>
                <a (click)="onBack()">Tasks</a>
            </li>
            <li class="active">
                <strong>Update Task</strong>
            </li>
        </ol>
    </div>
    <div class="col-sm-2 ">

    </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-content" (keyup)="onchange()">
                    <form  ngNoForm id="taskForm" class="form-horizontal" *ngIf="taskModel">
                        <p>Note: * are mandatory fields.</p>
                      <div class="form-group col-sm-12">
                            <label class="col-sm-2 control-label">Heading *</label>

                            <div class="col-sm-10">
                                <select required class="form-control" name="Heading" [(ngModel)]="taskModel.Heading">
                                    <option value="">Choose Heading</option>
                                     <option value="{{hed._id}}" *ngFor="let hed of Headings">{{hed.Heading}}</option>
                                    <!-- <option value="Users">Users</option>
                                    <option value="Transactions">Transactions</option> -->
                                   
                            </select>
                            </div>

                        </div>
                        <div class="form-group col-sm-12">
                            <label class="col-sm-2 control-label">Level*</label>

                            <div class="col-sm-10">
                                <select required class="form-control"  name="Level"  [(ngModel)]="taskModel.Level">
                                    <option value="">Choose Level</option>
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                  
                                   
                            </select>
                            </div>

                        </div>
                        <div class="form-group col-sm-12">
                            <label class="col-sm-2 control-label">Task Name*</label>

                            <div class="col-sm-10">
                                <input required type="text" placeholder="Task Name"  name="Name"  [(ngModel)]="taskModel.Name" class="form-control">
                            </div>

                        </div>

                        <div class="form-group col-sm-12">
                            <label class="col-sm-2 control-label">Title*</label>

                            <div class="col-sm-10">
                                <input required type="text" placeholder="Menu Title"  name="Title"  [(ngModel)]="taskModel.Title" class="form-control">
                            </div>

                        </div>
                        <div class="form-group col-sm-12">
                            <label class="col-sm-2 control-label">URL*</label>

                            <div class="col-sm-10">
                                <input required type="text" placeholder="Menu URL"  name="Url"  [(ngModel)]="taskModel.Url" class="form-control">
                            </div>

                        </div>
                        <div class="form-group col-sm-12">
                            <label class="col-sm-2 control-label">Icon cssClass*</label>

                            <div class="col-sm-10">
                                <input required type="text" placeholder="fa fa-task"  name="ccClass"  [(ngModel)]="taskModel.cssClass" class="form-control">
                            </div>

                        </div>
                        <div class="form-group col-sm-12">
                            <label class="col-sm-2 control-label">Sort Order*</label>

                            <div class="col-sm-10">
                                <input required type="text" placeholder="Sort Order"  name="SortOrder"  [(ngModel)]="taskModel.SortOrder" class="form-control">
                            </div>

                        </div>
                        <div class="form-group col-sm-12">
                            <label class="col-sm-2 control-label">Staus*</label>

                            <div class="col-sm-10">
                                <select required class="form-control"  name="Status"  [(ngModel)]="taskModel.Status">
                                    <option value="">Choose Status</option>
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                            </div>

                        </div>


                        <div class="form-group col-sm-12">
                            <label class="col-sm-2 control-label">Sub Tasks</label>

                            <div class="col-sm-10">
                                <table class="table table-striped table-bordered table-hover ">
                                    <thead>
                                        <tr>
                                            <th>Task Name</th>
                                            <th>Url</th>
                                            <th width="100px">Status</th>
                                           <th width="165px">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let task of taskModel.SubTask">
                                            <ng-container *ngIf="!task.Edit">
                                                <td>{{task.Name}}</td>
                                                <td>{{task.Url}}</td>
                                                <td>{{task.Status}}</td>
                                                <td>
                                                    <button class="btn btn-sm btn-success listcss " type="button" (click)="EditSub(task)"><li class="fa fa-edit"></li> Edit</button>
                                                    <button class="btn btn-sm  btn-danger listcss " type="button" (click)="DeleteSub(task)"><li class="fa fa-trash"></li> Delete</button>
                                                </td>
                                            </ng-container>
                                            <ng-container *ngIf="task.Edit">
                                                <td><input type="text" class="form-control" [(ngModel)]="EditSubTask.Name"> </td>
                                                <td><input type="text" class="form-control" [(ngModel)]="EditSubTask.Url"> </td>
                                                <td>
                                                    <select class="form-control" [(ngModel)]="EditSubTask.Status">
                                                        <option value="">Choose Status</option>
                                                        <option value="Active">Active</option>
                                                        <option value="Inactive">Inactive</option>
                                                    </select>
                                                </td>
                                                <td> <button class="btn btn-sm btn-success listcss " type="button" (click)="UpdateSub(task)"><li class="fa fa-save"></li> Update</button>
                                                    <button class="btn btn-sm  btn-warning listcss " type="button" (click)="CancelSub(task)"><li class="fa fa-close"></li> Cancel</button></td>

                                            </ng-container>

                                        </tr>

                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td><input type="text" class="form-control" [(ngModel)]="SubTask.Name"> </td>
                                            <td><input type="text" class="form-control" [(ngModel)]="SubTask.Url"> </td>
                                            <td> <select class="form-control" [(ngModel)]="SubTask.Status">
                                    <option value="">Choose Status</option>
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                            </select> </td>
                                            <td> <button class="btn btn-sm btn-success" type="button" (click)="AddSubTask()"><li class="fa fa-plus"></li> Add SubTask</button></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>

                        </div>

                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <button class="btn btn-sm btn-success" type="button" (click)="Save()"><li class="fa fa-save"></li> Save</button>
                                <button class="btn btn-sm btn-success" type="button" (click)="onBack()"><li class="fa fa-arrow-left"></li> Back to list</button>
                            </div>
                        </div>
                    </form>
                </div>


            </div>
        </div>
    </div>
</div>

<sharedModal [Title]="'Update Confirmation'" [desc]="Msg" (btnOKClicked)="btnOK($event)"></sharedModal>